(function(){function t(e){e=e||location.hash.substring(1)||"index";var t=$("#contents > div");t.each(function(){var t=$(this);t.attr("id")===e?t.css({display:"block"}):t.css({display:"none"})})}var e=io.connect("/");e.on("connect",function(e){console.log("connect",e);$("body").cls("connected")});e.on("disconnect",function(e){console.log("disconnect");$("body").cls({connected:null})});$("#user .button").tap(function(){var t=$("#user .nick-name"),n=t.value();if(!n){alert("ニックネームを入力してください。");return}t.attr({disabled:"disabled"});$("#user .button").visible(0);e.emit("addUser",{name:n})});e.on("userData",function(e){$.storage("user",e)});e.on("win",function(e){var t=$.storage("user");t.id===e.id&&$("#index img").attr({src:"/img/kozuchi.png"})});e.on("currectUser",function(e){var t=$.storage("user");t.id===e.id&&alert("currect!")});e.on("reset",function(){$("#vote li").each(function(){$(this).cls({tap:null})})});$("#vote input").tap(function(){var t=$(this);$("#vote input").each(function(){$(this).cls({tap:0})});t.cls("tap");e.emit("recieveAnswer",{value:t.value()})});e.on("saveAnswer",function(e){$.storage("answer",e)});e.on("changePage",function(e){$("#vote input").each(function(){$(this).cls({tap:0})});e.name==="q"?location.hash="#vote":location.hash="#index"});$.win.on("hashchange",function(){t()});t()})();